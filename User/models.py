from django.db import models
from django.core.validators import MinValueValidator,MinLengthValidator,RegexValidator,MaxValueValidator
# from Restaurant.models import *
from django.conf import settings
from django.db.models.signals import post_save
from django.contrib.auth.models import AbstractBaseUser, PermissionsMixin
from django.db import models
# from .managers import CustomUserManager,AuthorManager
from .managers import AuthorManager,RestaurantManager
from django.conf import settings
from datetime import *
from cities_light.models import Country, City

default_res_image = "data:image/jpeg;base64,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"

class MyAuthor(AbstractBaseUser):
    USERNAME_FIELD = "email"
    REQUIRED_FIELDS = []
    lat = models.FloatField(default= 0 , blank= True,null= True)
    lon = models.FloatField(default= 0 ,blank= True,null= True)
    objects = AuthorManager()
    email = models.EmailField(unique= True)
    is_staff = models.BooleanField(default= False)
    is_active = models.BooleanField(default= True)
    is_superuser = models.BooleanField(default= False)
    is_admin = models.BooleanField(default=False)
    password = models.CharField(max_length=16,validators=[MinLengthValidator(4)])
    role = models.CharField(max_length=255, default="customer")
    # For checking permissions. to keep it simple all admin have ALL permissions
    def has_perm(self, perm, obj=None):
        return self.is_admin

    # Does this user have permission to view this app? (ALWAYS YES FOR SIMPLICITY)
    def has_module_perms(self, app_label):
        return True

class RestaurantManager(MyAuthor):
    name = models.CharField(max_length=255, unique=True)
    manager_image = models.TextField(null= True , blank= True)
    number = models.CharField(max_length= 14,blank= True, null=True)
    def __str__(self) -> str:
        return self.name

class Restaurant(models.Model):
    category = (
        ("Iranian", "Iranian"), 
        ("Foreign", "Foreign"), 
    )
    type = models.CharField(choices=category,max_length=255, blank=True)
    address = models.CharField(max_length=255)
    lat = models.FloatField(default= 0 , blank= True,null= True)
    lon = models.FloatField(default= 0 ,blank= True,null= True)
    name = models.CharField(max_length=255, unique=True)
    restaurant_image = models.TextField(blank=True, null=True, default=default_res_image)
    logo = models.TextField(null= True , blank= True)
    discount = models.DecimalField(max_digits=2, decimal_places=2,default=0.00)
    number = models.CharField(max_length= 14,blank= True, null=True)
    # this field is for when the number of purchases be more than a specific number , the discount would be given to the customer
    purches_counts =models.IntegerField(blank= True, default= 100)
    rate = models.FloatField(validators=[MinValueValidator(0), MaxValueValidator(5)], default=0.0,blank= True)
    count_rates = models.IntegerField(default=0,blank= True)
    date_of_establishment = models.DateField(default=date.today())
    description = models.CharField(max_length=1024 , default= "")
    manager = models.ForeignKey(RestaurantManager, on_delete=models.CASCADE)
    def save(self, *args, **kwargs):
        if self.restaurant_image == "" or self.restaurant_image==None:
            self.restaurant_image = default_res_image
        super().save(*args, **kwargs)
    def __str__(self) -> str:
        return self.name

class Customer(MyAuthor):
    address = models.CharField(max_length=255 , default= "")
    name = models.CharField(max_length=255)
    username = models.CharField(max_length=255, blank=True)
    customer_img = models.TextField(blank= True , null= True)
    phone_number = models.CharField(max_length=14,blank= True)
    gender_choice = (
        ("male", "Male"), 
        ("female", "Female"), 
    )
    gender = models.CharField(max_length=255,choices=gender_choice,blank=True)
    date_of_birth = models.DateField(null=True,blank=True)
    wallet_balance = models.DecimalField(decimal_places=2, default=0,max_digits= 20,null= True)
    list_of_favorites_res = models.ManyToManyField(Restaurant, related_name='cust_favor_list', null= True , blank= True)
    def save(self, *args, **kwargs):
        self.username = self.name
        super().save(*args, **kwargs)
    def __str__(self) -> str:
        return self.username
    

class VC_Codes(AbstractBaseUser):
    name = models.CharField(max_length=255,null=True,blank= True)
    email = models.EmailField(unique= True)
    vc_code = models.CharField(max_length=10, null=True)
    def __str__(self) -> str:
        return str(self.email)


# class CountryCityDict(models.Model):
#     country = models.CharField(max_length=255)
#     cities = models.ManyToManyField(City, related_name='cities', null= True , blank= True)
#     def __str__(self) -> str:
#         return self.country
    
